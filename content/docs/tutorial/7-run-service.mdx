---
title: 7. Run your service
---
import { Callout } from 'fumadocs-ui/components/callout';
import { Tab, Tabs } from "fumadocs-ui/components/tabs";



<Callout title="Clear WAVS data" type="error">
Before proceeding, if you previously used wavs, clear old data by running the following command.

```bash
rm -rf ~/wavs/
```

</Callout>

<Callout title="Weather API Key" type="warn">
This terminal session must have access to your [Weather API Key](https://home.openweathermap.org/users/sign_up). Before proceeding, make sure you have exported your API key.

```bash
export WAVS_ENGINE_ENV_OPEN_WEATHER_API_KEY="<Your-API-Key>"
```
</Callout>

## Start WAVS

1. The following command launches Anvil (your local testchain), the WAVS runtime, and the WAVS aggregator, which aggregates multiple operator responses into a single transaction to conserve gas.

```bash
just start-all
```

2. Open a new terminal and run the following command to deploy EigenLayer Core contracts:

```bash
just cli-deploy-core
```

3. Copy the EigenLayer Core contract addresses directly from the deployment with the following command. This will save your contract addresses to `WAVS/cli/deployments.json`.

```bash
CONTRACTS=`cat ~/wavs/cli/deployments.json | jq -r .eigen_core.local`
export FOUNDRY_ANVIL_PRIVATE_KEY="0xac0974bec39a17e36ba4a6b4d238ff944bacb478cbed5efcae784d7bf4f2ff80"
export CLI_EIGEN_CORE_DELEGATION_MANAGER=`echo $CONTRACTS | jq -r '.delegation_manager'`
export CLI_EIGEN_CORE_REWARDS_COORDINATOR=`echo $CONTRACTS | jq -r '.rewards_coordinator'`
export CLI_EIGEN_CORE_AVS_DIRECTORY=`echo $CONTRACTS | jq -r '.avs_directory'`
```

5. Deploy the ECDSA Stake Registry contract for message signing verification and your custom Service Manager contract for task submission to your local Anvil chain.

```bash
forge script ./contracts/script/ReeceWeatherServiceManager.s.sol --rpc-url http://127.0.0.1:8545 --broadcast
```

6. Grab the contract addresses from `latest`.

```bash
# ECDSA_STAKE_REGISTRY_ADDRESS=`jq -r .transactions[0].contractAddress < broadcast/LayerServiceManager.s.sol/31337/run-latest.json`
SERVICE_MANAGER_ADDRESS=`jq -r '.transactions[1].contractAddress' < broadcast/ReeceWeatherServiceManager.s.sol/31337/run-latest.json`
```

<Callout title="Note" type="info">
The EDCSA contract is not necessary for this tutorial, so it is commented out, but you may need it when creating your own service later on.
</Callout>

7. Deploy your service, including your service component and your service manager contract.

```bash
just cli-deploy-service ./components/eth_trigger_reece_weather.wasm ${SERVICE_MANAGER_ADDRESS}
```

8. In your terminal, you'll see a `service_id` for your service. Insert your `service_id` in the command below to add a task for your service. In this example, `"Nashville,TN"` is the input for the service.

<Callout title="Format" type="info">
When building your own service, you can use the following format for a JSON input: `{\"x\":2}`

You can also use hex encode: `{"x":2}` -> `7b2278223a327d`
</Callout>


```bash
just cli-add-task <your-service_id-here> "Nashville,TN"
```
Your task will be submitted with an incremental triggerId.

If successful, the service will be run, and the response data will be saved to the chain, including the operator signature and response bytes.

9. Finally, you can query the contract by the TriggerId of your task to ensure the response data is stored.

```bash
DATA_RESP=`cast call $SERVICE_MANAGER_ADDRESS "signedDataByTriggerId(uint64)(bytes)" 1`; echo $DATA_RESP
cast --to-ascii $DATA_RESP
```
